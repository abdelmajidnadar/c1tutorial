echo "This is a Cassandra script"
echo "les keyspaces deja disponibles:"
echo "select * from system_schema.keyspaces;"
cqlsh -e "select * from system_schema.keyspaces;"
echo "Ajouter un keyspace:"
echo "create keyspace bibliotheque with replication=		 {'class':'SimpleStrategy','replication_factor':2};"
cqlsh -e "create keyspace bibliotheque with replication=		   {'class':'SimpleStrategy','replication_factor':2};"
echo "Verification:"
echo "select * from system_schema.keyspaces;"
cqlsh -e "select * from system_schema.keyspaces;"
echo "Modifier le RF de 2 a 3:"
echo "Alter keyspace \"bibliotheque\" with replication={'class':'SimpleStrategy','replication_factor':3};"
cqlsh -e "Alter keyspace \"bibliotheque\" with replication={'class':'SimpleStrategy','replication_factor':3};"
echo "Verification:"
echo "select * from system_schema.keyspaces;"
cqlsh -e "select * from system_schema.keyspaces;"
echo "ajouter une famille de colonne --livre:"
echo "create table bibliotheque.livre(code int, nom varchar, auteur varchar, primary key(code));"
cqlsh -e "create table bibliotheque.livre(code int, nom varchar, auteur varchar, primary key(code));"
echo "Verification:"
echo "Desc bibliotheque"
cqlsh -e "Desc bibliotheque"
echo "Ajouter datePublication a livre:"
echo "alter table bibliotheque.livre add datePublication timestamp;"
cqlsh -e "alter table bibliotheque.livre add datePublication timestamp;"
echo "Verification:"
echo "Desc bibliotheque"
cqlsh -e "Desc bibliotheque"
echo "supprimer datePublication:"
echo "alter table bibliotheque.livre drop datePublication"
cqlsh -e "alter table bibliotheque.livre drop datePublication"
echo "ajouter une ligne:"
echo "insert into bibliotheque.livre (code,nom,auteur)values(123,'Michael','Fontaine');"
cqlsh -e "insert into bibliotheque.livre (code,nom,auteur)values(123,'Michael','Fontaine');"
echo "verification:"
echo "select * from bibliotheque.livre;"
cqlsh -e "select * from bibliotheque.livre;"
echo "modifier le nom dans cette ligne:"
echo "update bibliotheque.livre set nom='robert' where code=123;"
cqlsh -e "update bibliotheque.livre set nom='robert' where code=123;"
echo "verification:"
echo "select * from bibliotheque.livre;"
cqlsh -e "select * from bibliotheque.livre;"
echo "supprimer une ligne:"
echo "delete from bibliotheque.livre where code=123;"
cqlsh -e "delete from bibliotheque.livre where code=123;"
echo "supprimer une famille de colonne:"
echo "drop columnFamily bibliotheque.livre;"
cqlsh -e "drop columnFamily bibliotheque.livre;"
echo "Verification:"
echo "Desc bibliotheque;"
cqlsh -e "Desc bibliotheque;"
echo "supprimer un keyspace:"
echo "drop keyspace \"bibliotheque\";"
cqlsh -e "drop keyspace \"bibliotheque\";"
echo "verification:"
echo "select * from system_schema.keyspaces;"
cqlsh -e "select * from system_schema.keyspaces;"
cqlsh -e "exit"
echo "end"